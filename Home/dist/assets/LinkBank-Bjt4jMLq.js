import{r as k,g as j,j as u,f as q,a as $,o as D,s as E,l as x,w as H,q as s,t as m,v as B,y as d,x as e,z as n,C as S,M,J as g,A as _,R,D as r,E as h,F as G,B as J,S as O}from"./index-CwvAlKn0.js";import{H as I}from"./HomeOutlined-DbiD1w2U.js";const K={id:"profile"},P={class:"info"},Q={class:"info_description"},W={class:"deposit",style:{margin:"20px"}},X=d("h3",{style:{color:"#fff"}},"Liên kết ngân hàng",-1),te={__name:"LinkBank",setup(Y){const c=k(j("user")),p=k(u(c.balance)),C=k(u(c.betToday)),v=q(),a=$({bankAccountNumber:"",bankName:"",bankBranch:"",bankAccountName:""});D(()=>{E.on(`update-balance-${c.value._id}`,t=>{p.value=u(t.balance)}),x.get("/me/profile").then(t=>{c.value=t.user,a.bankAccountNumber=t.user.bankAccountNumber,a.bankName=t.user.bankName,a.bankBranch=t.user.bankBranch,a.bankAccountName=t.user.bankAccountName}).catch(t=>{console.log(t),v.push("/login")})}),H(c,t=>{p.value=u(t.balance),C.value=u(t.betToday)});const F=t=>{console.log("Success:",t),x.post("/me/link-bank",t).then(l=>{g.msg("Liên kết tài khoản ngân hàng thành công",{icon:1,time:2e3})}).catch(l=>{g.msg("Liên kết thất bại",{icon:2,time:2e3})})},T=t=>{console.log("Failed:",t),g.msg("Vui lòng nhập đầy đủ thông tin",{icon:2,time:2e3})};return(t,l)=>{const V=s("a-avatar"),f=s("a-typography.Title"),b=s("a-space"),y=s("a-col"),N=s("a-row"),L=s("a-select-option"),w=s("a-select"),i=s("a-form-item"),A=s("a-input"),z=s("a-button"),U=s("a-form");return m(),B("div",K,[d("div",P,[e(b,{align:"center",style:{display:"flex","justify-content":"space-around"}},{default:n(()=>[e(_(I),{style:{color:"#fff","font-size":"25px",display:"block"},onClick:l[0]||(l[0]=o=>_(v).push("/"))}),e(V,{size:64,src:_(R)(c.value.avatar),alt:c.value.username},null,8,["src","alt"]),e(f,{style:{color:"#fff","font-size":"18px"},class:"notranslate"},{default:n(()=>[r(h(c.value.username),1)]),_:1})]),_:1})]),d("div",Q,[e(N,{gutter:"10",style:{"text-align":"center","justify-content":"center"}},{default:n(()=>[e(y,{span:8},{default:n(()=>[e(b,{direction:"vertical"},{default:n(()=>[e(f,{level:"5",style:{color:"#5d636e",display:"block",height:"30px"}},{default:n(()=>[r(" Số dư tài khoản ")]),_:1}),e(f,{level:"5",style:{color:"#fff","font-size":"20px"},class:"notranslate"},{default:n(()=>[r(h(p.value),1)]),_:1})]),_:1})]),_:1})]),_:1})]),d("div",W,[c.value.bankAccountNumber?M("",!0):(m(),S(N,{key:0,gutter:"10",style:{"text-align":"center","justify-content":"center"}},{default:n(()=>[e(y,{span:12},{default:n(()=>[e(b,{direction:"vertical"},{default:n(()=>[X]),_:1})]),_:1})]),_:1})),e(U,{layout:"vertical",model:a,autocomplete:"off",onFinish:F,onFinishFailed:T},{default:n(()=>[e(i,{label:"Chọn ngân hàng",name:"bankName",rules:[{required:!0,message:"Vui lòng chọn ngân hàng"}]},{default:n(()=>[e(w,{value:a.bankName,"onUpdate:value":l[1]||(l[1]=o=>a.bankName=o)},{default:n(()=>[(m(!0),B(G,null,J(_(O),o=>(m(),S(L,{value:o.short_name,key:o.short_name},{default:n(()=>[r(h(`(${o.short_name}) ${o.name}`),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),e(i,{label:"Số tài khoản",name:"bankAccountNumber",rules:[{required:!0,message:"Vui lòng nhập số tài khoản"}]},{default:n(()=>[e(A,{value:a.bankAccountNumber,"onUpdate:value":l[2]||(l[2]=o=>a.bankAccountNumber=o)},null,8,["value"])]),_:1}),e(i,{label:"Tên tài khoản",name:"bankAccountName",rules:[{required:!0,message:"Vui lòng nhập tên tài khoản"}]},{default:n(()=>[e(A,{value:a.bankAccountName,"onUpdate:value":l[3]||(l[3]=o=>a.bankAccountName=o)},null,8,["value"])]),_:1}),e(i,null,{default:n(()=>[e(z,{type:"primary",style:{width:"100%"},"html-type":"submit"},{default:n(()=>[r("Liên kết")]),_:1})]),_:1})]),_:1},8,["model"])])])}}};export{te as default};
