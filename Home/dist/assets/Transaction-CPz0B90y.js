import{r as g,g as R,j as c,f as $,u as D,c as L,o as V,s as q,l as w,w as E,q as i,t as r,v as d,y as a,x as t,z as e,F as G,B as H,A as n,R as K,D as y,E as u,G as M,M as U}from"./index-CwvAlKn0.js";import{i as z}from"./deposit-Dw15gah2.js";import{H as A}from"./HomeOutlined-DbiD1w2U.js";const O={id:"profile"},I={class:"info"},J={class:"info_description"},P={class:"action_money"},Q=["src"],W=a("span",null,"Nạp tiền",-1),X=["src"],Y=a("span",null,"Rút tiền",-1),Z={class:"transaction"},tt=a("h3",{style:{color:"#ccc"}},"Biến động số dư",-1),et=a("span",{style:{color:"white"}},"Số dư: ",-1),ot={key:0,style:{color:"green"}},st={key:1,style:{color:"red"}},at={style:{color:"#fff",display:"block",height:"30px","font-size":"16px"}},nt={key:0,style:{color:"#fff",display:"block",height:"30px","font-size":"16px"}},lt={key:1},ut={__name:"Transaction",setup(ct){const l=g(R("user")),m=g(c(l.balance)),T=g(c(l.betToday)),v=g([]),h=$(),x=h.currentRoute.value.query.type;console.log(x);const B=D(),C=L(()=>B.state.cskh);return V(()=>{q.on(`update-balance-${l.value._id}`,o=>{m.value=c(o.balance)}),w.get("/me/profile").then(o=>{l.value=o.user}).catch(o=>{console.log(o),h.push("/login")}),w.get("/me/get-balance-fluctuation",{params:{type:x}}).then(o=>{v.value=o.docs}).catch(o=>{console.log(o),h.push("/login")})}),E(l,o=>{m.value=c(o.balance),T.value=c(o.betToday)}),(o,_)=>{const S=i("a-avatar"),p=i("a-typography.Title"),f=i("a-space"),N=i("a-col"),j=i("a-row"),k=i("a-button"),F=i("a-divider");return r(),d("div",O,[a("div",I,[t(f,{align:"center",style:{display:"flex","justify-content":"space-around"}},{default:e(()=>[t(n(A),{style:{color:"#fff","font-size":"25px",display:"block"},onClick:_[0]||(_[0]=s=>n(h).push("/"))}),t(S,{size:64,src:n(K)(l.value.avatar),alt:l.value.username},null,8,["src","alt"]),t(p,{style:{color:"#fff","font-size":"18px"},class:"notranslate"},{default:e(()=>[y(u(l.value.username),1)]),_:1})]),_:1})]),a("div",J,[t(j,{gutter:"10",style:{"text-align":"center","justify-content":"center"}},{default:e(()=>[t(N,{span:8},{default:e(()=>[t(f,{direction:"vertical"},{default:e(()=>[t(p,{level:"5",style:{color:"#5d636e",display:"block",height:"30px"}},{default:e(()=>[y(" Số dư tài khoản ")]),_:1}),t(p,{level:"5",style:{color:"#fff","font-size":"20px"},class:"notranslate"},{default:e(()=>[y(u(m.value),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",P,[t(f,{style:{width:"100%",display:"flex","justify-content":"space-around"}},{default:e(()=>[t(k,{type:"primary",onClick:_[1]||(_[1]=s=>{var b;return n(M)((b=C.value)==null?void 0:b.url)})},{default:e(()=>[t(f,null,{default:e(()=>[a("img",{src:n(z),alt:""},null,8,Q),W]),_:1})]),_:1}),t(k,{class:"width_draw",onClick:_[2]||(_[2]=s=>n(h).push("/withdraw"))},{default:e(()=>[t(f,null,{default:e(()=>[a("img",{src:n(z),alt:""},null,8,X),Y]),_:1})]),_:1})]),_:1})]),t(F,{style:{height:"1px","background-color":"#ccc",margin:"0 10px"}}),a("div",Z,[tt,v.value.length?(r(!0),d(G,{key:0},H(v.value,s=>(r(),d("div",{class:"transaction_box",key:s._id},[t(f,{direction:"vertical"},{default:e(()=>[t(p,{style:{"font-size":"16px"}},{default:e(()=>[et,s.type==="deposit"?(r(),d("span",ot,"+ "+u(n(c)(s.amount)),1)):(r(),d("span",st,"- "+u(n(c)(s.amount)),1))]),_:2},1024),t(p,{style:{color:"#fff",display:"block",height:"30px","font-size":"16px"}},{default:e(()=>[y(" Lý do: "+u(s.reson??"Không có lý do"),1)]),_:2},1024),a("div",at," Trạng thái: "+u(s.status==="pending"?"Đang chờ xử lý":s.status==="accept"?"Thành công":"Từ chối"),1),s.note?(r(),d("div",nt," Ghi chú: "+u(s.note),1)):U("",!0)]),_:2},1024)]))),128)):(r(),d("div",lt,[t(p,{style:{color:"#fff",display:"block",height:"30px","font-size":"18px","text-align":"center"}},{default:e(()=>[y(" Không có dữ liệu ")]),_:1})]))])])}}};export{ut as default};
