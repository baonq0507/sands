import{x as t,I as G,r as k,g as K,j as x,f as q,u as F,c as J,o as Q,s as W,l as S,w as X,q as r,t as d,v as p,y as o,z as a,A as h,R as Y,D as v,E as f,G as Z,J as U}from"./index-CwvAlKn0.js";import{i as z}from"./deposit-Dw15gah2.js";import{H as ee}from"./HomeOutlined-DbiD1w2U.js";var te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};function B(c){for(var e=1;e<arguments.length;e++){var u=arguments[e]!=null?Object(arguments[e]):{},m=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(m=m.concat(Object.getOwnPropertySymbols(u).filter(function(_){return Object.getOwnPropertyDescriptor(u,_).enumerable}))),m.forEach(function(_){ne(c,_,u[_])})}return c}function ne(c,e,u){return e in c?Object.defineProperty(c,e,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[e]=u,c}var T=function(e,u){var m=B({},e,u.attrs);return t(G,B({},m,{icon:te}),null)};T.displayName="UploadOutlined";T.inheritAttrs=!1;const ae={id:"profile"},le={class:"info"},oe={class:"info_description"},ie={class:"action_money"},se=["src"],ue=o("span",null,"Nạp tiền",-1),re=["src"],ce=o("span",null,"Rút tiền",-1),de={class:"navigation"},pe=o("h3",{style:{color:"#ccc"}},"Thông tin cá nhân",-1),ve={key:0},fe={key:1},_e=o("p",null,"Liên kết email",-1),he={key:0},me={key:1,style:{color:"#fff"}},ye=o("p",null,"Liên kết số điện thoại",-1),ge={key:0},ke={key:1,style:{color:"#fff"}},be=o("p",null,"Họ và tên",-1),Ce={key:0},xe={key:1,style:{color:"#fff"}},we=o("p",null,"Mã giới thiệu",-1),Oe=o("p",null,"Ảnh đại diện",-1),Te={__name:"Info",setup(c){const e=k(K("user")),u=k(x(e.balance)),m=k(x(e.betToday)),_=q();k([]);const $=k([]),i=k({fullname:e.value.fullname,email:e.value.email,phone:e.value.phone,inviteCode:e.value.inviteCode}),H=F(),V=J(()=>H.state.cskh),M="https://api.p88hk.info/upload";Q(()=>{W.on(`update-balance-${e.value._id}`,l=>{u.value=x(l.balance)}),S.get("/me/profile").then(l=>{e.value=l.user,i.value.email=l.user.email,i.value.phone=l.user.phone,i.value.fullname=l.user.fullname,i.value.inviteCode=l.user.inviteCode}).catch(l=>{console.log(l),_.push("/login")})}),X(e,l=>{u.value=x(l.balance),m.value=x(l.betToday)});const w=(l,n)=>{S.put("/me/profile",{[l]:n}).then(b=>{e.value=b.user,U.msg("Cập nhật thông tin thành công",{icon:1,time:2e3})}).catch(b=>{console.log(b),U.msg("Cập nhật thông tin thất bại",{icon:2,time:2e3})})},P=l=>{console.log(l),l.file.status==="done"&&S.put("/me/profile",{avatar:l.file.response.url}).then(n=>{e.value=n.user,U.msg("Cập nhật ảnh đại diện thành công",{icon:1,time:2e3})}).catch(n=>{console.log(n),U.msg("Cập nhật ảnh đại diện thất bại",{icon:2,time:2e3})})};return(l,n)=>{const b=r("a-avatar"),N=r("a-typography.Title"),C=r("a-space"),A=r("a-col"),D=r("a-row"),y=r("a-button"),E=r("a-divider"),g=r("a-collapse-panel"),I=r("router-link"),O=r("a-input"),L=r("a-upload"),R=r("a-collapse");return d(),p("div",ae,[o("div",le,[t(C,{align:"center",style:{display:"flex","justify-content":"space-around"}},{default:a(()=>[t(h(ee),{style:{color:"#fff","font-size":"25px",display:"block"},onClick:n[0]||(n[0]=s=>h(_).push("/"))}),t(b,{size:64,src:h(Y)(e.value.avatar),alt:e.value.username},null,8,["src","alt"]),t(N,{style:{color:"#fff","font-size":"18px"},class:"notranslate"},{default:a(()=>[v(f(e.value.username),1)]),_:1})]),_:1})]),o("div",oe,[t(D,{gutter:"10",style:{"text-align":"center","justify-content":"center"}},{default:a(()=>[t(A,{span:8},{default:a(()=>[t(C,{direction:"vertical"},{default:a(()=>[t(N,{level:"5",style:{color:"#5d636e",display:"block",height:"30px"}},{default:a(()=>[v(" Số dư tài khoản ")]),_:1}),t(N,{level:"5",style:{color:"#fff","font-size":"20px"},class:"notranslate"},{default:a(()=>[v(f(u.value),1)]),_:1})]),_:1})]),_:1})]),_:1})]),o("div",ie,[t(C,{style:{width:"100%",display:"flex","justify-content":"space-around"}},{default:a(()=>[t(y,{type:"primary",onClick:n[1]||(n[1]=s=>{var j;return h(Z)((j=V.value)==null?void 0:j.url)})},{default:a(()=>[t(C,null,{default:a(()=>[o("img",{src:h(z),alt:""},null,8,se),ue]),_:1})]),_:1}),t(y,{class:"width_draw",onClick:n[2]||(n[2]=s=>h(_).push("/withdraw"))},{default:a(()=>[t(C,null,{default:a(()=>[o("img",{src:h(z),alt:""},null,8,re),ce]),_:1})]),_:1})]),_:1})]),t(E,{style:{height:"1px","background-color":"#ccc",margin:"0 10px"}}),o("div",de,[pe,t(R,{activeKey:$.value,"onUpdate:activeKey":n[11]||(n[11]=s=>$.value=s),accordion:""},{default:a(()=>[t(g,{key:"1",header:"Tài khoản"},{default:a(()=>[o("p",null,f(e.value.username),1)]),_:1}),t(g,{key:"2",header:"Ngân hàng liên kết",disabled:!1},{default:a(()=>[e.value.bankName?(d(),p("div",fe,[o("p",null," Tên ngân hàng: "+f(e.value.bankName),1),o("p",null," Số tài khoản: "+f(e.value.bankAccountNumber),1),o("p",null," Tên tài khoản: "+f(e.value.bankAccountName),1)])):(d(),p("p",ve,[t(I,{to:"/link-bank"},{default:a(()=>[v("Ngân hàng liên kết")]),_:1})]))]),_:1}),t(g,{key:"3",header:"Email"},{default:a(()=>[_e,e.value.email?(d(),p("span",me,f(e.value.email),1)):(d(),p("div",he,[t(O,{value:i.value.email,"onUpdate:value":n[3]||(n[3]=s=>i.value.email=s)},null,8,["value"]),t(y,{type:"primary",onClick:n[4]||(n[4]=s=>w("email",i.value.email)),style:{width:"100%",margin:"10px 0"}},{default:a(()=>[v("Cập nhật")]),_:1})]))]),_:1}),t(g,{key:"4",header:"Số điện thoại"},{default:a(()=>[ye,e.value.phone?(d(),p("span",ke,f(e.value.phone),1)):(d(),p("div",ge,[t(O,{value:i.value.phone,"onUpdate:value":n[5]||(n[5]=s=>i.value.phone=s)},null,8,["value"]),t(y,{type:"primary",onClick:n[6]||(n[6]=s=>w("phone",i.value.phone)),style:{width:"100%",margin:"10px 0"}},{default:a(()=>[v("Cập nhật")]),_:1})]))]),_:1}),t(g,{key:"5",header:"Họ và tên"},{default:a(()=>[be,e.value.fullname?(d(),p("span",xe,f(e.value.fullname),1)):(d(),p("div",Ce,[t(O,{value:i.value.fullname,"onUpdate:value":n[7]||(n[7]=s=>i.value.fullname=s)},null,8,["value"]),t(y,{type:"primary",onClick:n[8]||(n[8]=s=>w("fullname",i.value.fullname)),style:{width:"100%",margin:"10px 0"}},{default:a(()=>[v("Cập nhật")]),_:1})]))]),_:1}),t(g,{key:"6",header:"Mã giới thiệu"},{default:a(()=>[we,t(O,{value:i.value.inviteCode,"onUpdate:value":n[9]||(n[9]=s=>i.value.inviteCode=s)},null,8,["value"]),t(y,{type:"primary",onClick:n[10]||(n[10]=s=>w("inviteCode",i.value.inviteCode)),style:{width:"100%",margin:"10px 0"}},{default:a(()=>[v("Cập nhật")]),_:1})]),_:1}),t(g,{key:"7",header:"Ảnh đại diện"},{default:a(()=>[Oe,t(L,{action:M,name:"file","show-upload-list":!1,onChange:P},{default:a(()=>[t(y,null,{default:a(()=>[t(h(T)),v(" Chọn ảnh đại diện ")]),_:1})]),_:1})]),_:1})]),_:1},8,["activeKey"])])])}}};export{Te as default};
