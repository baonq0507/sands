import{_ as G}from"./Header-C_d6U9Mw.js";import{F as K}from"./Footer-DigKJm0u.js";import{i as P}from"./axios-Dkq8iht1.js";import{r as w,s as Q,b as u,c as v,d as g,w as a,e,g as f,h as _,j as k,k as y,F as x,i as R,G as h,t as $}from"./index-BIJFk_Lq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j={style:{background:"#fff",padding:"12px",minHeight:"calc(100vh - 170px)"}},D=f("h3",null,"Thông tin người dùng",-1),z={class:"user_detail"},ee={__name:"UserCreate",setup(A){const l=w({fullname:"",phone:"",email:"",role:"user",password:"",passwordConfirm:"",permissions:{user:[],inviteCode:[],game:[],setting:[],requestMoney:[],userBalance:[],settingNoti:[]}});Q();const F=async n=>{console.log("Success:",n);const t={...n,permissions:d.value},r=h.load(1);P.post("/users/create",t).then(o=>{h.msg("Cập nhật thành công",{icon:1,time:1500})}).catch(o=>{var i,c;h.msg(((c=(i=o==null?void 0:o.response)==null?void 0:i.data)==null?void 0:c.message)??"Cập nhật thất bại",{icon:2,time:1500})}).finally(()=>{h.close(r)})},N=n=>{console.log("Failed:",n)},M=n=>{n==="user"&&(d.value={user:[],inviteCode:[],game:[],setting:[],requestMoney:[],userBalance:[],settingNoti:[],cskh:[]})},X={user:[{label:"Tạo mới",value:"create"},{label:"Chỉnh sửa",value:"edit"},{label:"Xóa",value:"delete"},{label:"Xem",value:"view"}],inviteCode:[{label:"Chỉnh sửa",value:"edit"},{label:"Xem",value:"view"}],game:[{label:"Chỉnh sửa",value:"edit"},{label:"Xem",value:"view"}],setting:[{label:"Chỉnh sửa",value:"edit"},{label:"Xem",value:"view"}],requestMoney:[{label:"Chỉnh sửa",value:"edit"},{label:"Xóa",value:"delete"},{label:"Xem",value:"view"}],userBalance:[{label:"Chỉnh sửa",value:"edit"}],settingNoti:[{label:"Chỉnh sửa",value:"edit"},{label:"Xem",value:"view"}],cskh:[{label:"Chỉnh sửa",value:"edit"},{label:"Xem",value:"view"}]},q=n=>{switch(n){case"user":return"Người dùng";case"inviteCode":return"Mã mời";case"game":return"Game";case"setting":return"Cài đặt";case"requestMoney":return"Nạp rút";case"userBalance":return"Cộng trừ tiền";case"settingNoti":return"Cài đặt thông báo";case"cskh":return"Chăm sóc khách hàng";default:return n}},d=w({user:[],inviteCode:[],game:[],setting:[],requestMoney:[],userBalance:[]}),B=(n,t)=>{console.log(n,t),d.value[n].includes(t)?d.value[n]=d.value[n].filter(r=>r!==t):d.value[n].push(t)};return(n,t)=>{const r=u("a-input"),o=u("a-form-item"),i=u("a-col"),c=u("a-select-option"),V=u("a-select"),U=u("a-checkbox"),S=u("a-checkbox-group"),b=u("a-row"),C=u("a-input-password"),E=u("a-button"),H=u("a-form"),L=u("a-layout-content"),T=u("a-layout");return v(),g(T,null,{default:a(()=>[e(G,{selectedKeys:["1"]}),e(L,{style:{padding:"20px 50px"}},{default:a(()=>[f("div",j,[D,f("div",z,[e(H,{layout:"vertical",model:l.value,onFinish:F,onFinishFailed:N},{default:a(()=>[e(b,{gutter:"10"},{default:a(()=>[e(i,{span:12},{default:a(()=>[e(o,{name:"username",label:"Họ và tên",rules:[{required:!0,message:"Vui lòng nhập họ và tên"},{min:6,message:"Họ và tên phải có ít nhất 6 ký tự"}]},{default:a(()=>[e(r,{value:l.value.username,"onUpdate:value":t[0]||(t[0]=s=>l.value.username=s)},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(o,{name:"phone",label:"Số điện thoại"},{default:a(()=>[e(r,{value:l.value.phone,"onUpdate:value":t[1]||(t[1]=s=>l.value.phone=s)},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(o,{label:"Email",name:"email",rules:[{required:!1,message:"Vui lòng nhập email"},{type:"email",message:"Email không đúng định dạng"}]},{default:a(()=>[e(r,{value:l.value.email,"onUpdate:value":t[2]||(t[2]=s=>l.value.email=s)},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(o,{name:"role",label:"Quyền"},{default:a(()=>[e(V,{value:l.value.role,"onUpdate:value":t[3]||(t[3]=s=>l.value.role=s),style:{width:"100%"},onChange:M},{default:a(()=>[e(c,{value:"admin"},{default:a(()=>[_("Quản trị")]),_:1}),e(c,{value:"user"},{default:a(()=>[_("Người dùng")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),l.value.role==="admin"?(v(),g(i,{key:0,span:24},{default:a(()=>[e(b,null,{default:a(()=>[(v(),k(x,null,y(X,(s,p)=>e(i,{span:12,key:p},{default:a(()=>[e(o,{name:"permissions",label:q(p)},{default:a(()=>[e(S,null,{default:a(()=>[(v(!0),k(x,null,y(s,m=>(v(),g(U,{key:m.value,value:m.value,onChange:I=>B(p,m.value)},{default:a(()=>[_($(m.label),1)]),_:2},1032,["value","onChange"]))),128))]),_:2},1024)]),_:2},1032,["label"])]),_:2},1024)),64))]),_:1})]),_:1})):R("",!0),e(i,{span:12},{default:a(()=>[e(o,{name:"password",label:"Mật khẩu",rules:[{required:!0,message:"Vui lòng nhập mật khẩu"},{min:6,message:"Mật khẩu phải có ít nhất 6 ký tự"}]},{default:a(()=>[e(C,{value:l.value.password,"onUpdate:value":t[4]||(t[4]=s=>l.value.password=s)},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(o,{name:"passwordConfirm",label:"Xác nhận mật khẩu",rules:[{required:!0,message:"Vui lòng xác nhận mật khẩu"},{min:6,message:"Mật khẩu phải có ít nhất 6 ký tự"},{validator:(s,p,m)=>{p!==l.value.password?m("Mật khẩu không khớp"):m()}}]},{default:a(()=>[e(C,{value:l.value.passwordConfirm,"onUpdate:value":t[5]||(t[5]=s=>l.value.passwordConfirm=s)},null,8,["value"])]),_:1},8,["rules"])]),_:1})]),_:1}),e(o,null,{default:a(()=>[e(E,{type:"primary","html-type":"submit"},{default:a(()=>[_("Lưu")]),_:1})]),_:1})]),_:1},8,["model"])])])]),_:1}),e(K)]),_:1})}}};export{ee as default};
