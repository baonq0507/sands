import{_ as B}from"./Header-C_d6U9Mw.js";import{F as N}from"./Footer-DigKJm0u.js";import{i as h}from"./axios-Dkq8iht1.js";import{s as W,r as s,a as F,o as J,v as L,b as l,c as Q,d as R,w as u,m as v,e as o,g as b,l as V}from"./index-BIJFk_Lq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j={style:{background:"#fff",padding:"12px",minHeight:"100vh"}},A=b("h3",null,"Lịch sử đặt cược",-1),Y={__name:"HistoryBet",setup(H){const S=W(),T=s(null),D=S.currentRoute.value.params.code,I=s({});F({betData:""});const w=s([]);s("top");const g=t=>{const a={1:"Lớn",2:"Nhỏ",3:"Lẻ",4:"Chẵn"};return t.map(e=>{var i;const n=(i=e==null?void 0:e.user)==null?void 0:i.username,d=["số đầu tiên","số thứ hai","số thứ ba","số thứ tư","số thứ năm"],_=e.betInUser.map((c,x)=>{const M=d[x]||`số thứ ${x+1}`,O=a[c.value]||`value ${c.value}`;return`${M}: ${O}`}).join(`
`);return console.log(e),{...e,resultSession:e!=null&&e.betData?e.betData.betData.join(","):"",username:n,betInUserText:_,id:e!=null&&e.betData?e.betData.id:""}})},C=t=>{h.get("/history/get").then(a=>{const e=g(a.docs);console.log(e),p.value=v(e),r.value={...r.value,total:a.totalDocs+1,pageSize:a.limit,current:a.page,showSizeChanger:!0,showQuickJumper:!0,showTotal:n=>`Tổng kết qủa ${a.totalDocs} kết quả`}}).catch(a=>{console.log(a)})},p=s([]),m=async(t={})=>{const a={...t,gameCode:D};console.log(a);const e=await h.get("/history/get",{params:a}),n=g(e.docs);console.log(n),p.value=v(n),r.value={...r.value,total:e.totalDocs+1,pageSize:e.limit,current:e.page,showSizeChanger:!0,showQuickJumper:!0,showTotal:d=>`Tổng kết qủa ${e.totalDocs} kết quả`}},$=(t,a,e)=>{m({results:t.pageSize,page:t==null?void 0:t.current,sortField:e.field,sortOrder:e.order,...a})},q=[{title:"Phiên ID",dataIndex:"id",key:"id"},{title:"Người dùng",dataIndex:"username",key:"username"},{title:"Tiền cược",dataIndex:"amount",key:"amount"},{title:"Số dư trước cược",dataIndex:"beforeOnWin",key:"beforeOnWin"},{title:"Số tiền thay đổi",dataIndex:"interest",key:"interest"},{title:"Số dư sau cược",dataIndex:"afterOnWin",key:"afterOnWin"},{title:"Số đặt cược",dataIndex:"betInUserText",key:"betInUserText"},{title:"Tên game",dataIndex:"code",key:"code"},{title:"kết quả phiên",dataIndex:"resultSession",key:"resultSession"},{title:"Thời gian",dataIndex:"createAt",key:"createAt",customRender:t=>V(t.text)}],r=s({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:t=>`Tổng kết qủa ${t} kết quả`});J(()=>{h("/me/profile").then(t=>{T.value=t.user,C()}).catch(t=>{console.log(t)})}),L(()=>I.value._id,t=>{t&&h.get(`/history/id/${t}`).then(a=>{const e=g(a);w.value=v(e)}).catch(a=>{console.log(a)})});const y=s(""),z=t=>{m({username:t})},k=s(""),U=t=>{m({search:t})};return(t,a)=>{const e=l("a-input-search"),n=l("a-col"),d=l("a-row"),f=l("a-table"),_=l("a-layout-content"),i=l("a-layout");return Q(),R(i,null,{default:u(()=>[o(B,{selectedKeys:[2]}),o(_,{style:{padding:"20px 50px"}},{default:u(()=>[b("div",j,[A,o(d,{gutter:"10"},{default:u(()=>[o(n,{span:12},{default:u(()=>[o(e,{style:{"margin-bottom":"10px"},value:y.value,"onUpdate:value":a[0]||(a[0]=c=>y.value=c),onSearch:z,placeholder:"Tìm kiếm người dùng"},null,8,["value"])]),_:1}),o(n,{span:12,style:{"text-align":"right"}},{default:u(()=>[o(e,{style:{"margin-bottom":"10px"},value:k.value,"onUpdate:value":a[1]||(a[1]=c=>k.value=c),onSearch:U,placeholder:"Tìm kiếm khác"},null,8,["value"])]),_:1})]),_:1}),o(f,{scroll:{x:1500,y:700},onChange:$,columns:q,"data-source":p.value,bordered:"",pagination:r.value},null,8,["data-source","pagination"])])]),_:1}),o(N)]),_:1})}}};export{Y as default};
